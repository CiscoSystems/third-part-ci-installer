# This file is generated by Ansible
#  DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
#
images-dir: /opt/nodepool/images

zookeeper-servers:
  - host: localhost
    port: 2181

webapp:
  port: 8005
  listen_address: '0.0.0.0'

diskimages:
  - name: ubuntu-xenial
    elements:
      - ubuntu
      - vm
      - pip-and-virtualenv
      - cloud-init-datasources
    username: ubuntu
    env-vars:
      DIB_CLOUD_INIT_DATASOURCES: 'ConfigDrive, OpenStack'
  - name: centos-7
    elements:
      - centos-minimal
      - vm
      - pip-and-virtualenv
      - cloud-init-datasources
    env-vars:
      DIB_CLOUD_INIT_DATASOURCES: 'ConfigDrive, OpenStack'

labels:
  - name: ubuntu
    min-ready: {{ labels_min_ready_merged['ubuntu'] }}
  - name: centos-7
    min-ready: {{ labels_min_ready_merged['centos-7'] }}

providers:
{% for provider in nodeproviders %}
  - name: {{provider.name}}
    cloud: {{provider.name}}
    diskimages:
      - name: ubuntu-xenial
        config-drive: true
      - name: centos-7
        config-drive: true
    pools:
      - name: main
        {%- if provider.max_servers is defined %}
        max-servers: {{ provider.max_servers }}
        {%- endif %}
        labels:
          - name: ubuntu
            flavor-name: '{{provider.flavor}}'
            diskimage: ubuntu-xenial
            key-name: nodepool
          - name: centos-7
            flavor-name: '{{provider.flavor}}'
            diskimage: centos-7
            key-name: nodepool
{% endfor %}
